<!DOCTYPE html>
<html lang="en">
<meta charset="utf-8">
<title>COVID-19 vaccination doses administered in Germany, per state</title>
<meta content="width=device-width,initial-scale=1" name=viewport>
<style>
  html {
    font: 1rem/1.6 sans-serif;
  }
  /* Ideally, we’d make the charts responsive. Google Charts doesn’t
     seem to support this. */
  .chart {
    width: 100%;
    min-height: 400px;
  }
  #chart-per-mille {
    min-height: 800px;
  }
</style>
<link rel="icon" href="favicon.svg">
<h1>COVID-19 vaccination doses administered in Germany, per state</h1>
<h2 id="per-mille">COVID-19 vaccination doses administered per 1,000 inhabitants</h2>
<div id="chart-per-mille" class="chart"></div>
<% for (const state of states) { %>
<h2 id="<% print(state.toLowerCase()) %>">Total number of COVID-19 vaccination doses administered in <%= state %></h2>
<p>In <%= state %>, <%= perMille(state) %> vaccination doses have been administered per 1,000 inhabitants.</p>
<div id="chart-cumulative-<% print(state.toLowerCase()) %>" class="chart"></div>
<% } %>
<p><a href="https://github.com/mathiasbynens/covid-19-vaccinations-germany/blob/main/data/data.csv">View the raw data.</a></p>
<script src="https://www.gstatic.com/charts/loader.js"></script>
<script>
  google.charts.load('current', { 'packages': ['corechart'] });
  google.charts.setOnLoadCallback(drawCharts);

  function drawVaccinationsPerMilleChart() {
    const data = new google.visualization.DataTable();
    data.addColumn('string', 'Day');
    /* Generated data starts here: */
    <%= generateScript() %>
    /* Generated data ends here. */
    const element = document.querySelector('#chart-per-mille');
    const chart = new google.visualization.LineChart(element);
    chart.draw(data);
  }

  function drawCharts() {
    drawVaccinationsPerMilleChart();

  <% for (const state of states) { %>
    {
      const data = new google.visualization.DataTable();
      data.addColumn('string', 'Day');
      /* Generated data starts here: */
      <%= generateScript(state) %>
      /* Generated data ends here. */
      const element = document.querySelector('#chart-cumulative-<% print(state.toLowerCase()) %>');
      const chart = new google.visualization.LineChart(element);
      chart.draw(data, {
        vAxis: {
          viewWindowMode: 'explicit',
          viewWindow: {
            max: <%= max %>,
            min: 0,
          },
        },
      });
    }
  <% } %>

  }
</script>
